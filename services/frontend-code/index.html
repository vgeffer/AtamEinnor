<!DOCTYPE html>
<html lang = "en">
	<head>
		<meta charset = "UTF-8" lang = "en-US">
		<meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
		
		<!--link fonts-->
		<link rel = "preconnect" href = "https://fonts.gstatic.com">
        <link href = "https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&family=UnifrakturCook:wght@700&display=swap" rel = "stylesheet">

		<!--link css-->
		<link rel = "stylesheet" href = "page.css"/>
		<link rel = "stylesheet" href = "state.css"/>
		
		<!--Link Icon-->
		<link rel = "icon" type = "image/png" sizes = "32x32" href = "./assets/favicon-32x32.png">
		<link rel = "icon" type = "image/png" sizes = "16x16" href = "./assets/favicon-16x16.png">

		<!--link functionality-->
		<script src = "js/menu.js"></script>
		<script src = "js/global_var.js"></script>
		<script src = "js/event.js"></script>
		<script src = "js/game.js"></script>

		<!--link rendering-->
		<script src = "js/renderer.js"></script>

		<!--link network-->
		<script src = "js/network.js"></script>

		<title>Atam Einnor</title>
	</head>


	<body>
		
		<div class = "fullscreen">
			<div id = "SettingsContainer" class = "Container hidden" style = "z-index: 4;">
				<h2>Settings</h2>
				<div class = "sans-font">
					<input id = "Desynchronize" type = "checkbox"/> Desynchonize Renedring <br>
					<input id = "LowQualTextures" type = "checkbox"/> Lower-Quality Textures <br>
					<input id = "AutoReconect" type = "checkbox"/> Auto-Reconnect 
				</div>
				<div class = "center-content top-margin">
					<button onclick = "SaveSettings()">Close</button>
				</div>
			</div>

			<div id = "DisconnectedMsgContainer" class = "Container hidden">
				<p id = "ErrorReason" class = "sans-font" style = "color: red; font-size: 1.5rem;"></p>

				<div class = "center-content top-margin">
					<button onclick = "window.location = window.location;">Close</button>
				</div>
			</div>
		</div>

		<div id = "Menu">
			<!--background-->

			<!--add anim-->
			<div class = "GameTitle">
				<h1>Atam Einnor</h1>
			</div>

			<div class = "MenuBox">
				<button onclick = "OpenPopup('PlayContainer')">Play</button>
				<button onclick = "OpenPopup('SettingsContainer')">Settings</button>
				<button onclick = "OpenPopup('HowToPlayContainer')">How To Play</button>
				<button onclick = "OpenPopup('AboutUsContainer')">About us</button>
			</div>

			<div id = "PlayContainer" class = "Container hidden">
				<div class = "center-content top-margin">
					<a href = "javascript:void(0)" onclick = "{OpenPopup('JoinGameSubcontainer'); ClosePopup('CreateGameSubcontainer');}">Join Game</a>
					<a href = "javascript:void(0)" onclick = "{OpenPopup('CreateGameSubcontainer'); ClosePopup('JoinGameSubcontainer');}" class = "left-margin">Create Game</a>
				</div>

				<div id = "JoinGameSubcontainer" class = "SubContainer">
					<div class = "InputBoxes">
						<input id = "JoinNick" autocomplete = "off" type = "text" placeholder = "Nick" oninput = "ResetStyle('JoinNick')"/> 
						<input id = "JoinCode" autocomplete = "off" type = "text" placeholder = "Code" oninput = "ResetStyle('JoinCode')"/>
					</div>

					<p class = "sans-font center-text">Warning! By joining new game you'll lose <br>
						ability to reconnect to any previous game.<br>
						You'd also be disconnected from any previous game.
					</p>

					<div class = "center-content top-margin">
						<button onclick = "JoinGame()">Join</button>
						<button onclick = "JoinGameJWT()" id = "RejoinButton" disabled>Rejoin</button>
					</div>
				</div>

				<div id = "CreateGameSubcontainer" class = "SubContainer hidden">
					<div class = "InputBoxes">
						<input id = "CreatePlayerCount" autocomplete = "off" type = "number" max = "6" min = "2" placeholder = "Player Count (2 - 6)"/> 
						<input id = "CreateTurnCount" autocomplete = "off" type = "number" max = "100" min = "20" placeholder = "Turn Count (20 - 100)"/> 
						<input id = "CreateNick" autocomplete = "off" type = "text" placeholder = "Nick"/>
					</div>
					
					<p class = "sans-font center-text">Warning! By joining new game you'll lose <br>
						ability to reconnect to any previous game.<br>
						You'd also be disconnected from any previous game.
					</p>
					
					<div class = "center-content top-margin">
						<button onclick = "CreateGame()">Create</button>
					</div>
				</div>

				<div class = "center-content top-margin">
					<button onclick = "ClosePopup('PlayContainer')">Close</button>
				</div>
			</div>

			<div id = "AboutUsContainer" class = "Container hidden">
				<p class = "sans-font"> <!--Credits-->
					Project Lead: Hugo Halász <br>
					Codding: Viliam Geffert <br>
					Graphics: Ivan Čabra
				</p>

				<div>
					<h1>Special Thanks To:</h1>
					<p class = "sans-font"> <!--SpecialThanks-->
						Matej 'Kotlík' Kozub: Portable HTML/CSS/JS Wikipedia<br>
						
						

					</p>

					<h1>Playtesters: </h1>
					<p class = "sans-font"> <!--Playtesters-->
						In no particular order: <br>
						Kotlík, Jamajčan, 
					</p>
				</div>

				The All-Mighty server powered by <a href = "https://temp.kotol.cloud" target = "_blank" style = "color: #FCAC34;">kotol.cloud</a>

				<div class = "center-content top-margin">
					<button onclick = "ClosePopup('AboutUsContainer')">Close</button>
				</div>

			</div>

			<div id = "HowToPlayContainer" class = "Container hidden">
				TODO WRITE IT
				<div class = "center-content top-margin">
					<button onclick = "ClosePopup('HowToPlayContainer')">Close</button>
				</div>

			</div>
		</div>


		<div id = "Game" class = "hidden">
			<canvas id = "window" class = "Background"></canvas>

			<!--Chat-->
			<div id = "ChatWindow" class = "Chat hidden">
				<div id = "Messages" class = "MessageBox top-margin sans-font"></div>
				<div class = "inline">
					<input id = "Message" type = "text" placeholder = "Message" onkeydown = "EnterHandler(event)"/>
					<button class = "left-margin" onclick = "SendChatMessage()">Send</button>
				</div>
				<div class = "center-content top-margin">
					<button onclick = "ClosePopup('ChatWindow')">Close</button>
				</div>
			</div>

			<!--Shop-->
			<div id = "ShopContainer" class = "Container hidden">
				<div class = "center-content top-margin">
					<a href = "javascript:void(0)" onclick = "{OpenPopup('BuySubcontainer'); ClosePopup('SellGameSubcontainer');}">Buy</a>
					<a href = "javascript:void(0)" onclick = "{OpenPopup('SellGameSubcontainer'); ClosePopup('BuySubcontainer');}" class = "left-margin">Sell</a>
				</div>

				<div id = "BuySubcontainer" class = "SubContainer">
					<!--Support-->
					<div class = "inline">
						<img src = "./assets/support-14.png"/>
						<p class = "right-margin">Support</p>
						
						<div class = "inline right-margin">
							<p id = "SupportPrice">16</p>
							<img src = "./assets/coin_icon512x512.png" class = "icon"/>
						</div>

						<button id = "SupportOne">Buy</button>
					</div>

					<!--Ladder-->
					<div class = "inline">
						<img src = "./assets/ladder.png"/>
						<p class = "right-margin">Ladder</p>
						
						<div class = "inline right-margin">
							<p id = "LadderPrice">32</p>
							<img src = "./assets/coin_icon512x512.png" class = "icon"/>
						</div>

						<button id = "LadderOne">Buy</button>
					</div>

					<!--Torch-->
					<div class = "inline">
						<img src = "./assets/torch.png"/>
						<p class = "right-margin">Torch</p>
						
						<div class = "inline right-margin">
							<p id = "TorchPrice">32</p>
							<img src = "./assets/coin_icon512x512.png" class = "icon"/>
						</div>

						<button id = "TorchOne">Buy</button>
					</div>
				</div>

				<div id = "SellGameSubcontainer" class = "SubContainer hidden">
					
					<!--1st ore-->
					<div class = "inline">
						<img src = "./assets/crystal_single.png"/>
						<p class = "right-margin">Dwarf</p>
						
						<div class = "inline right-margin">
							<p id = "CrystalPrice">16</p>
							<img src = "./assets/coin_icon512x512.png" class = "icon"/>
						</div>

						<button id = "CrystalOne">Sell One</button>
						<button id = "CrystalAll">Sell All (640)</button>
					</div>

					<!--2st ore-->
					<div class = "inline">
						<img src = "./assets/diamond_single.png"/>
						<p class = "right-margin">Diamond</p>
						
						<div class = "inline right-margin">
							<p id = "DiamondPrice">32</p>
							<img src = "./assets/coin_icon512x512.png" class = "icon"/>
						</div>

						<button id = "DiamondOne">Sell One</button>
						<button id = "DiamondAll">Sell All (16)</button>
					</div>
				</div>

				<div class = "center-content top-margin">
					<button onclick = "ClosePopup('ShopContainer')">Close</button>
				</div>
			</div>

			<div id = "CharSelectContainer" class = "Container fullscreen">
				<div class = "SelectTitleWrapper">
					<h1>Choose Your Miners</h1>
				</div>
				<div class = "DescriptionWrapper">
					<div>
						<h1>Dwarf</h1>
							<img src = "assets/tst.png" alt = "it broken"/>
							<ul>
								<li>Mines Faster</li>
								<li>Moves Slower</li>
								<li>TODO ADD MORE</li>
							</ul>
							<div class = "inline">
								<button onclick = "AddWorker('dwarf')">+</button>
								<p id = "DwarfCount">0</p>
								<button onclick = "SubWorker('dwarf')">-</button>
							</div>
					</div>

					<div>
						<h1>Gnome</h1>
						<img src = "assets/selector.png" alt = "it broken"/>
						<ul>
							<li>Mines Slower</li>
							<li>Moves Faster</li>
							<li>TODO ADD MORE</li>
						</ul>

						<div class = "inline">
							<button onclick = "AddWorker('gnome')">+</button>
							<p id = "GnomeCount">0</p>
							<button onclick = "SubWorker('gnome')">-</button>
						</div>
					</div>
				</div>


				<div class = "center-content">
					<button id = "ConfirmSelection" onclick = "SaveWorkers()" disabled>0/3</button>
				</div>
			</div>

			<!--Start Message Container-->
			<div id = "StartGameQuestionContainer" class = "Container hidden">
				<h2 id = "StartGameQuestionText"></h2>
				<div class = "inline top-margin">
					<button onclick = "AllowStart()">Yes</button>
					<button onclick = "ClosePopup('StartGameQuestionContainer')">No</button>
				</div>
			</div>

			<!--Pause Menu-->
			<div id = "PauseMenuContainer" class = "Container hidden">
				<div class = "PauseButtons">
					<button onclick = "ClosePopup('PauseMenuContainer')">Resume Game</button>
					<button onclick = "OpenPopup('SettingsContainer')">Settings</button>
					<button onclick = "ExitGame()">Exit Game</button>
				</div>

				<div class = "CodeText">
					<p id = "RoomCode"></p>
					<a href = "javascript:void(0)" id = "RoomLink">Get room link</a>
				</div>
			</div>

			<!--Hud-->
			<div class = "Hud">
	
				<div class = "CoinDisplay">
					<img class = "CoinIcon" src = "assets/coin_icon512x512.png" alt = "It broken!" />
					<p id = "CoinCount">0</p>
				</div>

				<div id = "WaitingText" class = "WaitingTextWrapper"> 
					<h1>Waiting For Players...</h1>
				</div>


				<div class = "OpenChat"><button onclick = "OpenPopup('ChatWindow')">&#xf075;</button></div>
				<div class = "OpenPause"><button onclick = "OpenPopup('PauseMenuContainer')">&#10074;&#10074;</button></div>
			</div>
		</div>
	</body>
</html>

<!--Sus-->
<!--Amogus-->